<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Jail your binaries (with chroot). | PysKa's Writeups</title>
<meta name=description content="1. The why. You may have a binary you want to analyze it&rsquo;s behaviour, but great efforts are required for reverse engineering. In that case, you may want to run the binary instead, but that comes at the risk of potentially infecting your computer.
That&rsquo;s where the jail comes in. You create an environment which the binary cannot escape, and which has no connection to the rest of your system, and run it there. "><link rel=canonical href=https://pyska-ratzinger.github.io/posts/2023-04-23-jail-your-binaries/><meta property="og:title" content="Jail your binaries (with chroot)."><meta property="og:description" content="1. The why. You may have a binary you want to analyze it&rsquo;s behaviour, but great efforts are required for reverse engineering. In that case, you may want to run the binary instead, but that comes at the risk of potentially infecting your computer.
That&rsquo;s where the jail comes in. You create an environment which the binary cannot escape, and which has no connection to the rest of your system, and run it there."><meta property="og:type" content="article"><meta property="og:url" content="https://pyska-ratzinger.github.io/posts/2023-04-23-jail-your-binaries/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-23T12:46:38+00:00"><meta property="article:modified_time" content="2023-05-18T15:40:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jail your binaries (with chroot)."><meta name=twitter:description content="1. The why. You may have a binary you want to analyze it&rsquo;s behaviour, but great efforts are required for reverse engineering. In that case, you may want to run the binary instead, but that comes at the risk of potentially infecting your computer.
That&rsquo;s where the jail comes in. You create an environment which the binary cannot escape, and which has no connection to the rest of your system, and run it there."><link rel=stylesheet href=https://pyska-ratzinger.github.io/css/common.css></head><body class=infinitile><header><div><div class="container-h main-title charcoal-t-s"><a href=/ title=home><span class=logo><h1>PysKa's Writeups</h1></span></a></div><div class="container-h space-between"><div class="container-h space-between"><div class=button><a href=/>Home</a></div><div class=button><a href=/posts>All posts</a></div><div class=button><a href=/categories>Categories</a></div><div class=button><a href=/tags>Tags</a></div><div class=button><a href=/about>About</a></div><div class="button ml-6"><a href=https://github.com/PysKa-Ratzinger/ title=GitHub><span class=icon><i class='fab fa-github'>Github</i></span></a></div></div></div></div></header><div class="main container"><div class=container><div class=blog_info><div class=author-image-container><img src=/img/LaughingMan.svg alt=author-image></div><div class=blog_description><p>By PysKa Ratzinger</p><p>Published on: <time>23 April, 2023</time> |
6 minutes read</p><p>Last modified: <time>18 May, 2023</time></p><div class=blog_categories><label>Categories:</label>
<a class=category-link href=/categories/opsec>opsec</a></div><div class=blog_tags><label>Tags:</label>
<a class=tag-link href=/tags/forensics>forensics</a></div></div></div><article><div class=blog_container><div class=blog_details><h1 class=title>Jail your binaries (with chroot).</h1></div><div class=content><h1 id=1-the-why>1. The why.</h1><p>You may have a binary you want to analyze it&rsquo;s behaviour, but great efforts
are required for reverse engineering. In that case, you may want to run the
binary instead, but that comes at the risk of potentially infecting your
computer.</p><p>That&rsquo;s where the jail comes in. You create an environment which the binary
cannot escape, and which has no connection to the rest of your system, and run
it there.</p><h1 id=2-why-not-use-a-virtual-machine-or-docker>2. Why not use a virtual machine, or docker?</h1><p>I wonder the same thing.</p><h1 id=3-warning>3. WARNING!!!</h1><p>Please understand that making a secure contained environment requires in-depth
knowledge of how chroot (or pivot_root) work, and how they can be broken. All
of this work has already been done by other people smarter than you, which
resulted in Docker, virtual machines, or any other kind of virtualization or
containerization software.</p><p>This tutorial does not attempt to create a fail-proof solution. If you have
a binary you want to analyze and are paranoid enough to not trust other
containerization solutions, please consider using a burner physical PC without
internet connection instead.</p><p>If instead you just want to get your foot on door into understanding how chroot
works, or want to try building your own custom initramfs (same setup but
without the need for chroot), then this is for you. :)</p><h1 id=4-creating-the-environment>4. Creating the environment.</h1><p>So, to automate the process, let&rsquo;s create a script to help us.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>C_RST<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[0m&#34;</span>
</span></span><span style=display:flex><span>C_RED<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[0;31m&#34;</span>
</span></span><span style=display:flex><span>C_GREEN<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[1;32m&#34;</span>
</span></span><span style=display:flex><span>C_YELLOW<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[1;33m&#34;</span>
</span></span><span style=display:flex><span>C_CYAN<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[01;96m&#34;</span>
</span></span><span style=display:flex><span>C_PURPLE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[01;35m&#34;</span>
</span></span><span style=display:flex><span>C_BLUE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[01;34m&#34;</span>
</span></span><span style=display:flex><span>C_LGRAY<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\033[00;37m&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>USE_COLOR<span style=color:#f92672>=</span>true</span></span></code></pre></div><p>The first line is a shebang, and is needed if you want your script file to be
executable. Otherwise, you will need to <code>$ bash ./script.sh</code>
Let us now create a few helper functions to make our life more joyful. Those
are log_info() and log_error(). Again, this is not required.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>log_info<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>USE_COLOR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> true <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		echo -e <span style=color:#e6db74>&#34;[</span><span style=color:#e6db74>${</span>C_GREEN<span style=color:#e6db74>}</span><span style=color:#e6db74>+</span><span style=color:#e6db74>${</span>C_RST<span style=color:#e6db74>}</span><span style=color:#e6db74>]&#34;</span> <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		echo -e <span style=color:#e6db74>&#34;[+]&#34;</span> <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_error<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>USE_COLOR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> true <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		echo -e <span style=color:#e6db74>&#34;[</span><span style=color:#e6db74>${</span>C_RED<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>${</span>C_RST<span style=color:#e6db74>}</span><span style=color:#e6db74>]&#34;</span> <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		echo -e <span style=color:#e6db74>&#34;[-]&#34;</span> <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fail<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	log_error <span style=color:#e6db74>&#34;An error ocurred. Aborting...&#34;</span>
</span></span><span style=display:flex><span>	exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p>Now that our life has more color, we can start really thinking about that thing
we wanted to do, which is to jail our binaries. Since we are creating a chroot
environment, we need to populate this environment with everything it needs to
function&mldr; and nothing more. To do this, we can use a function such as the
following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>install_bins<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	PATH_TO_INSTALL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	BINS_TO_INSTALL<span style=color:#f92672>=(</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>@:2<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>	DEPS<span style=color:#f92672>=()</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> i in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BINS_TO_INSTALL[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> which <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span> &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			BIN<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>which <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>			TARGET<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PATH_TO_INSTALL<span style=color:#e6db74>}${</span>BIN<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>			log_info <span style=color:#e6db74>&#34;  - Installing </span><span style=color:#e6db74>${</span>BIN<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>			mkdir -p <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PATH_TO_INSTALL<span style=color:#e6db74>}</span><span style=color:#66d9ef>$(</span>dirname <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BIN<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>			cp -HL --parents <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BIN<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PATH_TO_INSTALL<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			IFS<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\n&#39;</span> DEPS<span style=color:#f92672>+=(</span> <span style=color:#66d9ef>$(</span>ldd <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BIN<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> 2&gt;/dev/null | sed -E <span style=color:#e6db74>&#39;s/^(.* =&gt;)?[ \t]*//g; s/ .*$//g&#39;</span> | grep <span style=color:#e6db74>&#34;^/&#34;</span><span style=color:#66d9ef>)</span> <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	log_info <span style=color:#e6db74>&#34;Total dependencies: </span><span style=color:#e6db74>${#</span>DEPS[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> DEP in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>DEPS[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span>$DEP<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			log_error <span style=color:#e6db74>&#34;Dependency does not exist... </span>$DEP<span style=color:#e6db74>. Aborting...&#34;</span>
</span></span><span style=display:flex><span>			exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		log_info <span style=color:#e6db74>&#34;  - Installing </span>$DEP<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>		mkdir -p <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PATH_TO_INSTALL<span style=color:#e6db74>}</span><span style=color:#66d9ef>$(</span>dirname <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>DEP<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>		cp -HL --parents <span style=color:#e6db74>&#34;</span>$DEP<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PATH_TO_INSTALL<span style=color:#e6db74>}</span><span style=color:#e6db74>/&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p>This install_bins() function takes at least 2 arguments. The first argument
is the folder where our chroot environment is located. The rest of the
arguments are a list of binaries to install in said environment.</p><p>If you analyze the function you will notice that it is split into 2 parts.
The first part calls ldd &ldquo;${bin}&rdquo; for every binary in the list, and parses the
output in search for which libraries the binaries needs to use.</p><p>Because we use ldd here, you should never include the binary you want to
analyze in this list. Only use this function with a list of binaries you trust,
as running ldd on unknown binaries can compromise your system.</p><p>The second part of the function iterates over every dependency and copies it
into our chroot environment.</p><p>Next, let us define a few variables which would be our arguments for our
script.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>CHROOT_DIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;./jail&#34;</span>           <span style=color:#75715e># Your chroot folder</span>
</span></span><span style=display:flex><span>BINS<span style=color:#f92672>=(</span><span style=color:#e6db74>&#34;bash&#34;</span> <span style=color:#e6db74>&#34;ps&#34;</span> <span style=color:#e6db74>&#34;mv&#34;</span> <span style=color:#e6db74>&#34;cp&#34;</span><span style=color:#f92672>)</span>  <span style=color:#75715e># The list of essential binaries to install</span></span></span></code></pre></div><p>You may want to parse argv yourself, or call getopt if you will use the script
multiple times.</p><p>Then, we get to the main body of our script, which does the &ldquo;heavy&rdquo; lifting
for us.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;Removing old </span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>...&#34;</span>
</span></span><span style=display:flex><span>rm -rf <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;Generating skeleton structure...&#34;</span>
</span></span><span style=display:flex><span>mkdir --parents <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>/<span style=color:#f92672>{</span>bin,dev,etc,lib,lib64,mnt/root,proc,root,sbin,sys,run/cryptsetup<span style=color:#f92672>}</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;Copying device nodes (null, console, tty, sda1)...&#34;</span>
</span></span><span style=display:flex><span>cp --archive /dev/<span style=color:#f92672>{</span>null,console,tty,sda1<span style=color:#f92672>}</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>/dev/ <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;Copying busybox (always included)...&#34;</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>/<span style=color:#f92672>{</span>usr/sbin,usr/bin,sbin,bin<span style=color:#f92672>}</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>install_bins <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;busybox&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>chroot <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> /bin/busybox --install -s <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;Installing other binaries...&#34;</span>
</span></span><span style=display:flex><span>install_bins <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CHROOT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BINS[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>||</span> fail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log_info <span style=color:#e6db74>&#34;All done!&#34;</span></span></span></code></pre></div><p>Do note that in my example, busybox is installed into the chroot environment.
If you do not want busybox, just remove those lines that install it.</p><h1 id=5-conclusion>5. Conclusion</h1><p>That&rsquo;s it. To use the chroot environment, don&rsquo;t forget to mount /proc, /dev
and /sys&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount -t proc none ./jail/proc
</span></span><span style=display:flex><span>mount --rbind /dev ./jail/dev
</span></span><span style=display:flex><span>mount --rbind /sys ./jail/sys</span></span></code></pre></div><p>And to copy the binary you want to analyze. Then, to chroot into your jail,
just</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chroot ./jail /bin/sh</span></span></code></pre></div><h1 id=6-security-considerations>6. Security considerations</h1><p>Do note that this jail is not full-proof. While chroot changes the root
directory into our jail, the jail is still interfacing with your own kernel
behind the curtains. So, you the kernel has a vulnerability which can be
exploited, the host machine is not safe. Even without vulnerabilities, the
root user still has to be nerfed in order for it to not break out, in case the
binary you run somehow finds a way to escalate privileges. This includes, not
allowing root to load modules, and that sort of thing.</p><p>Also, if you run &ldquo;ps auxf&rdquo; in the chroot environment, with our current
configuration, you will be able to see which processes are running in the host
machine as well. If you want complete isolation, you want to keep the chroot
environment from accessing this information as well. Not just this, but the
whole /dev mount, which may contain very sensitive information such as file
descriptors in the host machine (a common way to break out of containers).</p><p>If you are intending to use this in a production-environment, please take the
time to fix these issues. A way to do this, if you are so inclined, would be
to run qemu with a kernel image and set it&rsquo;s initrd boot variable to include
our own jail. If you have some kind of CPU-passthrough, performance should not
be that much of a problem.</p><p>To do this you just need to include an /init file in this jail which executes
bash, so that you are able to interact with the system.</p><p>If this seems like too much work for little benefit&mldr; I would agree. Although,
the use-case may be there, and if it is, then this guide may be helpful.</p><p>But really, if your paranoia is such that a virtual machine is not enough for
you, just install linux on your old beat up 2005 computer without a wireless
antenna and analyze the binary there.</p></div></div></article><article><dialog id=rgpdDialog><h2>Your privacy is valued.</h2><form method=dialog><p><label id=rgpdLabel></label></p><div class=text-center><div class=button><button id=cancelBtn>Cancel</button></div><div class=button><button id=confirmBtn>Confirm</button></div></div></form></dialog><div id=comment-section-container><div id=comment-control class=center><div id=comments-enable><div class=button><button id=enable-cactus-chat>Enable comments through Cactus Chat. (requires javascript)</button></div></div><div id=comments-disable><div class=button><button id=disable-cactus-chat>Disable comments.</button></div></div></div><div id=comments></div></article><script>const favDialog=document.getElementById("rgpdDialog"),cancelBtn=favDialog.querySelector("#cancelBtn"),confirmBtn=favDialog.querySelector("#confirmBtn"),rgpdLabel=favDialog.querySelector("#rgpdLabel");cancelBtn.value=!1,confirmBtn.value=!0;let listeners=[];favDialog.addEventListener("close",()=>{old_listeners=listeners,listeners=[],old_listeners.forEach(e=>{e(favDialog.returnValue)})});function showRgpdDialog(e,t){rgpdLabel.innerText=e,listeners.push(t),favDialog.showModal()}function getCookie(e){if(navigator.cookieEnabled){const n=`; ${document.cookie}`,t=n.split(`; ${e}=`);if(t.length===2)return t.pop().split(";").shift()}}function setCookie(e,t,n){let s="";if(n){let e=new Date;e.setTime(e.getTime()+n*24*60*60*1e3),expres="; expires="+e.toUTCString()}document.cookie=`${e}=${t||""}${s}; path=/; SameSite=strict`}function eraseCookie(e){document.cookie=`${e}=; Expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`}function getMainCookie(){if(navigator.cookieEnabled){let e=getCookie("pyskawriteups");if(e){let t=JSON.parse(atob(e));return t}}return!1}function saveMainCookie(e){if(navigator.cookieEnabled){let t=btoa(JSON.stringify(e));setCookie("pyskawriteups",t,30)}return!1}function acceptThirdParty(e){let t=getMainCookie();t||(t={"third-party":[]}),t["third-party"].includes(e)||(t["third-party"].push(e),saveMainCookie(t))}function rejectThirdParty(e){let t=getMainCookie();t||(t={"third-party":[]}),t["third-party"].includes(e)&&(t["third-party"]=t["third-party"].filter(t=>t!==e),saveMainCookie(t))}function userAskIfAcceptsThirdParty(e){return new Promise((t)=>{showRgpdDialog(`In order to use the functionality provided by ${e}, you need to allow this third-party to use cookies on this website. Is this something you want to allow?`,n=>{n=n==="true",n&&acceptThirdParty(e),t(n)})})}async function userAcceptedThirdParty(e,t){return new Promise(async n=>{let s=getMainCookie(),o=s&&"third-party"in s&&s["third-party"].includes(e);!o&&t&&(o=await userAskIfAcceptsThirdParty(e)),n(o)})}async function impl_initComments(e,t){let n=document.getElementById("comments"),i=document.getElementById("comments-enable"),a=document.getElementById("comments-disable"),r="cactus-chat";if(!e)return rejectThirdParty(r),n.innerHTML="",i.classList.remove("hidden"),a.classList.add("hidden"),!0;let l=await userAcceptedThirdParty(r,t);if(!l)return i.classList.remove("hidden"),a.classList.add("hidden"),!1;i.classList.add("hidden"),a.classList.remove("hidden");let s=document.createElement("script");s.type="text/javascript",s.src="https://latest.cactus.chat/cactus.js",s.onload=()=>{initComments({node:document.getElementById("comment-section"),defaultHomeserverUrl:"https://matrix.cactus.chat:8448",serverName:"cactus.chat",siteName:"pyska-ratzinger.github.io",commentSectionId:""})};let o=document.createElement("link");o.rel="stylesheet",o.href="https://latest.cactus.chat/style.css",o.type="text/css";let c=document.createElement("div");return c.id="comment-section",n.innerHTML="",n.appendChild(s),n.appendChild(o),n.appendChild(c),!0}enableCactusButton=document.getElementById("enable-cactus-chat"),disableCactusButton=document.getElementById("disable-cactus-chat"),enableCactusButton.onclick=()=>{impl_initComments(!0,!0)},disableCactusButton.onclick=()=>{impl_initComments(!1,!0)},impl_initComments(!0,!1)</script></div></div><div class=container><article class=center><noscript>Website footer. You currently have javascript disabled.</noscript><div id=nukeBtn class="text-center hidden"><div class="button warning"><button>Delete all cookies and remove consent for more cookies.</button></div></div><dialog id=nukeDialog><h2>Are you sure you want to delete all cookies?.</h2><form method=dialog><p><label id=nukeLabel>Note: This will also remove every consent for every third-party service you accepted to use.</label></p><div class=text-center><div class=button><button id=cancelBtn>Cancel</button></div><div class=button><button id=confirmBtn>Confirm</button></div></div></form></dialog><dialog id=nuke2Dialog><h2>All cookies have been deleted.</h2><form method=dialog><p>The page will now refresh, in order to apply all changes.</p><div class=text-center><div class=button><button>Close</button></div></div></form></dialog></article><script>const nukeBtn=document.getElementById("nukeBtn"),nukeDialog=document.getElementById("nukeDialog"),nuke2Dialog=document.getElementById("nuke2Dialog"),nukeConfirmBtn=nukeDialog.querySelector("#confirmBtn");function deleteAllCookies(){for(var e,t,n,o=document.cookie.split("; "),s=0;s<o.length;s++)for(n=window.location.hostname.split(".");!0;){for(e=encodeURIComponent(o[s].split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+n.join(".")+" ;path=",t=location.pathname.split("/"),console.log(e+"/"),document.cookie=e+"/";t.length>0;)console.log(e+t.join("/")),document.cookie=e+t.join("/"),t.pop();if(n.length>0)n.shift();else break}nuke2Dialog.showModal(),setTimeout(()=>{document.location.reload()},3e3)}nukeBtn.onclick=()=>{nukeDialog.showModal()},nukeConfirmBtn.onclick=()=>{deleteAllCookies()},nukeBtn.classList.remove("hidden")</script></div></body></html>